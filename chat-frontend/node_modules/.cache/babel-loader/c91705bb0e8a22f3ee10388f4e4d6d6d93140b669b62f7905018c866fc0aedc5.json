{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useRef, useCallback } from 'react';\nconst useWebSocket = url => {\n  _s();\n  const [connected, setConnected] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const wsRef = useRef(null);\n  const connect = useCallback(() => {\n    wsRef.current = new WebSocket(url);\n    wsRef.current.onopen = () => {\n      setConnected(true);\n      console.log('Connected to chat server');\n    };\n    wsRef.current.onmessage = event => {\n      const message = JSON.parse(event.data);\n      setMessages(prev => [...prev, message]);\n    };\n    wsRef.current.onclose = () => {\n      setConnected(false);\n      console.log('Disconnected from chat server');\n      setTimeout(connect, 3000);\n    };\n  }, [url]);\n  useEffect(() => {\n    connect();\n    return () => {\n      if (wsRef.current) {\n        wsRef.current.close();\n      }\n    };\n  }, [connect]);\n  const sendMessage = useCallback(content => {\n    if (wsRef.current && connected) {\n      const message = {\n        content,\n        timestamp: new Date()\n      };\n      wsRef.current.send(JSON.stringify(message));\n      return true;\n    }\n    return false;\n  }, [connected]);\n  return {\n    connected,\n    messages,\n    sendMessage\n  };\n};\n_s(useWebSocket, \"Jz689s2u7DiH0Yorr4ZXfLbIU8w=\");\nexport default useWebSocket;","map":{"version":3,"names":["useState","useEffect","useRef","useCallback","useWebSocket","url","_s","connected","setConnected","messages","setMessages","wsRef","connect","current","WebSocket","onopen","console","log","onmessage","event","message","JSON","parse","data","prev","onclose","setTimeout","close","sendMessage","content","timestamp","Date","send","stringify"],"sources":["/home/jon/kubernetes/3/src/hooks/useWebSocket.js"],"sourcesContent":["import { useState, useEffect, useRef, useCallback } from 'react';\n\nconst useWebSocket = (url) => {\n    const [connected, setConnected] = useState(false);\n    const [messages, setMessages] = useState([]);\n    const wsRef = useRef(null);\n\n    const connect = useCallback(() => {\n        wsRef.current = new WebSocket(url);\n\n        wsRef.current.onopen = () => {\n            setConnected(true);\n            console.log('Connected to chat server');\n        };\n\n        wsRef.current.onmessage = (event) => {\n            const message = JSON.parse(event.data);\n            setMessages(prev => [...prev, message]);\n        };\n\n        wsRef.current.onclose = () => {\n            setConnected(false);\n            console.log('Disconnected from chat server');\n            setTimeout(connect, 3000);\n        };\n    }, [url]);\n\n    useEffect(() => {\n        connect();\n        return () => {\n            if (wsRef.current) {\n                wsRef.current.close();\n            }\n        };\n    }, [connect]);\n\n    const sendMessage = useCallback((content) => {\n        if (wsRef.current && connected) {\n            const message = {\n                content,\n                timestamp: new Date()\n            };\n            wsRef.current.send(JSON.stringify(message));\n            return true;\n        }\n        return false;\n    }, [connected]);\n\n    return { connected, messages, sendMessage };\n};\n\nexport default useWebSocket;"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,WAAW,QAAQ,OAAO;AAEhE,MAAMC,YAAY,GAAIC,GAAG,IAAK;EAAAC,EAAA;EAC1B,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGR,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACS,QAAQ,EAAEC,WAAW,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAMW,KAAK,GAAGT,MAAM,CAAC,IAAI,CAAC;EAE1B,MAAMU,OAAO,GAAGT,WAAW,CAAC,MAAM;IAC9BQ,KAAK,CAACE,OAAO,GAAG,IAAIC,SAAS,CAACT,GAAG,CAAC;IAElCM,KAAK,CAACE,OAAO,CAACE,MAAM,GAAG,MAAM;MACzBP,YAAY,CAAC,IAAI,CAAC;MAClBQ,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;IAC3C,CAAC;IAEDN,KAAK,CAACE,OAAO,CAACK,SAAS,GAAIC,KAAK,IAAK;MACjC,MAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACI,IAAI,CAAC;MACtCb,WAAW,CAACc,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEJ,OAAO,CAAC,CAAC;IAC3C,CAAC;IAEDT,KAAK,CAACE,OAAO,CAACY,OAAO,GAAG,MAAM;MAC1BjB,YAAY,CAAC,KAAK,CAAC;MACnBQ,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;MAC5CS,UAAU,CAACd,OAAO,EAAE,IAAI,CAAC;IAC7B,CAAC;EACL,CAAC,EAAE,CAACP,GAAG,CAAC,CAAC;EAETJ,SAAS,CAAC,MAAM;IACZW,OAAO,CAAC,CAAC;IACT,OAAO,MAAM;MACT,IAAID,KAAK,CAACE,OAAO,EAAE;QACfF,KAAK,CAACE,OAAO,CAACc,KAAK,CAAC,CAAC;MACzB;IACJ,CAAC;EACL,CAAC,EAAE,CAACf,OAAO,CAAC,CAAC;EAEb,MAAMgB,WAAW,GAAGzB,WAAW,CAAE0B,OAAO,IAAK;IACzC,IAAIlB,KAAK,CAACE,OAAO,IAAIN,SAAS,EAAE;MAC5B,MAAMa,OAAO,GAAG;QACZS,OAAO;QACPC,SAAS,EAAE,IAAIC,IAAI,CAAC;MACxB,CAAC;MACDpB,KAAK,CAACE,OAAO,CAACmB,IAAI,CAACX,IAAI,CAACY,SAAS,CAACb,OAAO,CAAC,CAAC;MAC3C,OAAO,IAAI;IACf;IACA,OAAO,KAAK;EAChB,CAAC,EAAE,CAACb,SAAS,CAAC,CAAC;EAEf,OAAO;IAAEA,SAAS;IAAEE,QAAQ;IAAEmB;EAAY,CAAC;AAC/C,CAAC;AAACtB,EAAA,CA/CIF,YAAY;AAiDlB,eAAeA,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}